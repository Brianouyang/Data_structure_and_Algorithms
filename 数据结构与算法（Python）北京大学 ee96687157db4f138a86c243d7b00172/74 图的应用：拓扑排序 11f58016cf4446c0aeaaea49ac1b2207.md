# 74. 图的应用：拓扑排序

## Topological Sort

很多问题都可以化为图，利用图算法解决

例如早餐吃煎饼的过程

以动作为顶点，先后次序为有向边

![74%20%E5%9B%BE%E7%9A%84%E5%BA%94%E7%94%A8%EF%BC%9A%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F%2011f58016cf4446c0aeaaea49ac1b2207/pancakes.png](74%20%E5%9B%BE%E7%9A%84%E5%BA%94%E7%94%A8%EF%BC%9A%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F%2011f58016cf4446c0aeaaea49ac1b2207/pancakes.png)

从工作流程图得到工作次序排列的算法，称为“拓扑排序”

拓扑排序处理一个DAG，输出顶点的线性序列

使得两个顶点v,w，如果G中有(v,w)边，在线性序列中v就出现在w之前

拓扑排序广泛应用在依赖事件的排期上，还可以用在项目管理、数据库查询优化和矩阵乘法的次序优化上

拓扑排序可以采用DFS很好地实现：

将工作流程建立为图，工作项是顶点，依赖关系是有向边

工作流程图一定是个DAG图，否则有循环依赖对DAG图调用DFS算法，以得到每个顶点的“结束时间”

按照每个顶点的“结束时间”从大到小排序输出这个次序下的顶点列表

![74%20%E5%9B%BE%E7%9A%84%E5%BA%94%E7%94%A8%EF%BC%9A%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F%2011f58016cf4446c0aeaaea49ac1b2207/pancakesDFS.png](74%20%E5%9B%BE%E7%9A%84%E5%BA%94%E7%94%A8%EF%BC%9A%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F%2011f58016cf4446c0aeaaea49ac1b2207/pancakesDFS.png)

![74%20%E5%9B%BE%E7%9A%84%E5%BA%94%E7%94%A8%EF%BC%9A%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F%2011f58016cf4446c0aeaaea49ac1b2207/pancakesTS.png](74%20%E5%9B%BE%E7%9A%84%E5%BA%94%E7%94%A8%EF%BC%9A%E6%8B%93%E6%89%91%E6%8E%92%E5%BA%8F%2011f58016cf4446c0aeaaea49ac1b2207/pancakesTS.png)